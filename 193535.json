{"id":193535,"link":"https://chinadigitaltimes.net/chinese/2011/11/编程随想-如何用greasemonkey扩展google-reader/","date":"2011-11-02T18:00:56Z","modified":"2011-11-02T18:00:56Z","title":"编程随想 | 如何用GreaseMonkey扩展Google Reader","content":"<p>　　在说正题之前先插一句：Google 为了强行推广 G+，把 Google 阅读器的社交功能都阉了。今后，大伙儿如果想看俺的分享，除了继续用 Google Reader 订阅俺的博客（俺博客的RSS订阅地址： <a rel=\"nofollow\" href=\"http://feeds2.feedburner.com/programthink\">http://feeds2.feedburner.com/programthink</a> ），还可以在 Google+ 圈养（俺的 G+ 页面： <a rel=\"nofollow\" href=\"https://plus.google.com/113559088971921339544/\">https://plus.google.com/113559088971921339544/</a> ）。</p>\n<h2>★引子</h2>\n<p>　　话说俺一直是 Google Reader 的重度使用者——从2005年10月至今，俺的阅读数已超过13万。上周 Google 放出风声说要改版，俺还是满心期待的。谁曾想，昨天（11年11月1日）发布的新版本，那界面真是让人大跌眼镜——怎一个&#8221;烂&#8221;字了得！<br />　　不过，抱怨归抱怨，眼下暂时还没有合适的替代品，Google 阅读器还得接着用下去。为了不至于天天面对这么一个恶心的界面，俺发扬&#8221;自己动手丰衣足食&#8221;的DIY精神，亲自操刀修改阅读器的界面。有兴趣的同学，可以看看俺的经验分享。</p>\n<h2>★为啥要美化阅读器？</h2>\n<p>　　对于老用户而言，新版的界面简直是惨不忍睹——到处都是多余的空白，显得非常不紧凑。比如：文章的列表界面，间距也太大了。现在一屏能显示的帖子数只有原来的一半。这样一来，大大降低了阅读的效率，浪费的大伙儿的时间。<br />　　估计很多网友逆来顺受惯了。不管网站推出多么烂的界面，他们都默默忍受。但是，在当今 Web 盛行的互联网时代，普通用户是完全可以自己操刀修改网站界面滴（而且<b>几乎不需要专业技术</b>）！此中之奥妙，在于 <b>GreaseMonkey</b> 这一大杀器。</p>\n<h2>★GreaseMonkey 扫盲</h2>\n<p></p>\n<h3>◇GreaseMonkey 是啥玩意儿？</h3>\n<p>　　GreaseMonkey 俗称&#8221;油猴&#8221;<img src=\"http://blob-s-docs.googlegroups.com/docs/OQAAAHohjgl2Ufln43tgqlvePn9iQf7AFj-yasg7x2PGEbBhhvgxV3DzOTOUV69sqpLvK0ENrz5hXg0X4wzqFZV3rFAA15jOjGMMesMMCgiF_ckQ26ejZhzyBmGv\" width=\"64\" />，官网在&#8221;<a rel=\"nofollow\" href=\"http://www.greasespot.net/\">这里</a>&#8220;，维基百科的介绍在&#8221;<a rel=\"nofollow\" href=\"http://zh.wikipedia.org/zh-cn/Greasemonkey\">这里</a>&#8220;。它早先是 Firefox 的一款插件。但它可不是普通的插件，<b>它是插件的插件</b>。简单来说，你可以通过 JavaScript 脚本（以下简称 &#8220;JS脚本&#8221;），来扩展它的功能。因此，只要 JS 脚本能搞定的事情，它都能搞定。而且，你可以指定某个脚本仅仅作用在某个URL（某个网站）——也就是把脚本跟网站绑定。这样一来，就可以专门针对某个网站的页面进行调整。</p>\n<h3>◇油猴能干啥？</h3>\n<p>　　看到这里，肯定有人要问了，这些油猴的 JS 脚本，都能干些啥事捏？俺举几个例子：<br />　　比如，某个网站的广告条太碍眼，你可以用 JS 脚本把广告条干掉。<br />　　比如，你喜欢到某个视频网站去看视频，但是这个视频网站没有下载按钮。于是你就可以用 JS 脚本给每个视频加上一个下载按钮，方便你下载到本地收藏。</p>\n<h3>◇不会写 JS 脚本，咋办？</h3>\n<p>　　很多同学会担心，自己不懂得写 JS 脚本。其实大可不必害怕。因为油猴已经非常的普及，你能想到的大部分需求，早都已经有人（多半是老外）写好了，而且分享出来了。<br />　　在此，向列位看官隆重介绍：全球最大的（没有之一）油猴脚本收集站点——<a rel=\"nofollow\" href=\"http://userscripts.org/\">UserScripts.org</a>。这上面的脚本数量，已经到了6位数。由于脚本太多，你第一次上去的时候，建议先看<a rel=\"nofollow\" href=\"http://userscripts.org/tags\">它的标签分类</a>。根据分类，就可以比较容易滴找到自己要的脚本。</p>\n<h3>◇支持哪些浏览器？</h3>\n<p>　　前面说了，油猴早先是 Firefox 插件，自然是天生支持 Firefox。后来 Google 看到这玩意儿挺普及，就让 Chome 浏览器原生支持油猴脚本。也就是说，你无需安装额外插件，就可以让 Chrome 运行油猴脚本。Opera从 8.0 开始，貌似也兼容了油猴脚本（俺没试过，不知兼容性如何）。至于使用 IE 的同学，暂时无福享用了（建议尽早抛弃 IE 这种老土的浏览器）。</p>\n<h2>★增强阅读器功能的脚本</h2>\n<p>　　既然刚才提到了 UserScripts 网站，随便推荐几个脚本，可以为阅读器增加额外的功能。如果你常用 Google 阅读器，可以去尝试一下。</p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/show/9455\">Google Reader Preview Enhanced</a></h3>\n<p>　　这个脚本是专门对付那些没有全文输出的RSS（不输出全文的博客，非常讨厌）。当你碰到某个只输出摘要的博文，只要按一下快捷键（Shift+V），该脚本就会在阅读器的正文窗口里，自动显示该博文的全部正文。有了它，你无需离开 Google Reader 就可以看只输出摘要的博客了。</p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/review/8782\">Google Reader &#8211; Colorful List View</a></h3>\n<p>　　此脚本会给文章列表中的每一个帖子着色。相同订阅源文章，会标注相同的颜色。当你选中某个文件夹（Folder） 时，就可以很清楚看出那些文章来自同一个订阅源。<br />　　以下是脚本作者提供的效果图：<br /><center><img src=\"http://s3.amazonaws.com/uso_ss/6368/large.jpg\" alt=\"不见图、请翻墙\" width=\"75%\" /></center></p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/show/23671\">Google Reader Filter</a></h3>\n<p>　　看名称就知道，此脚本提供针对文章的过滤功能。你可以设置一些过滤规则，来决定哪些文章在列表中高亮显示，那些文章被排除（变灰）。另外，它还可以帮你隐藏重复的文章。</p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/show/21909\">Google Reader Subscribers Count</a></h3>\n<p>　　这个脚本会在窗口的右下角显示当前RSS的订阅者数量。</p>\n<h2>★优化阅读器界面的脚本</h2>\n<p>　　除了上述这些增强功能的脚本，还有很多脚本是用来美化 Google Reader 界面的。这些脚本中，有些是历史悠久的，有些是昨天才发布的（专门针对改版后的丑陋界面）。顺便说一下，Google Reader 刚改版，就冒出一堆美化界面的脚本，可见这次改版非常不得人心。</p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/show/6415\">Google Reader for wider screens</a></h3>\n<p>　　这个脚本有些年头了，而且很小巧。它可以充分利用屏幕的空间来显示文章正文，如果是宽屏显示器，则效果更佳。以下是俺截的两张对比图：</p>\n<p>调整前的正文布局<br /><center><img src=\"http://blob-s-docs.googlegroups.com/docs/OgAAAB_ORPdtOd4dpNComcyZoFW0AIzHJRYzCpHLxWAquTe7M5SlC_K0d0VysT-SJhJvIOs2Zy07YRhe0fSv-ov4vO8A15jOjCF8ccUVOYeSKq4xTg-xEazC_CVR\" alt=\"不见图、请翻墙\" width=\"75%\" /></center></p>\n<p>调整后的正文布局<br /><center><img src=\"http://blob-s-docs.googlegroups.com/docs/OgAAAGP_1yfsFidsunYCGcERMs5LGqLoyhdUR7Qpp8pu3HPMpBJMdrt4daGcomffpGv-Dn7buaazVMDuVoLQ_xMsWQQA15jOjL8Ubr0CQ0LhSJsu8cUMbb5o-BIS\" alt=\"不见图、请翻墙\" width=\"75%\" /></center></p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/show/58577\">Google Reader Absolutely Customizable</a></h3>\n<p>　　这个脚本有一大坨代码，但是功能也挺多。它在阅读器的界面里，加入了一个定制菜单。通过此菜单，你可以凭自己的喜好，对很多界面元素进行调整或显示/隐藏。<br />　　以下是脚本作者提供的效果图：</p>\n<p>定制菜单<br /><center><img src=\"http://s3.amazonaws.com/uso_ss/10612/large.jpg\" alt=\"不见图、请翻墙\" /></center></p>\n<p>选项对话框<br /><center><img src=\"http://s3.amazonaws.com/uso_ss/2774/large.jpg\" alt=\"不见图、请翻墙\" /></center></p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/show/116850\">Google Reader Demarginfier</a></h3>\n<p>　　这是昨天刚推出的脚本，专门针对改版后的土B界面。它可以压缩阅读器搜索条和工具条的高度、压缩文章列表的行高、压缩左边导航树的左边距。</p>\n<h3>◇<a rel=\"nofollow\" href=\"http://userscripts.org/scripts/show/116888\">Google Reader &#8211; Compact Design</a></h3>\n<p>　　又一个昨天推出的脚本，也是专门针对改版后的土B界面。功能跟前一个类似。同样能压缩阅读器搜索条和工具条的高度、压缩文章列表的行高、还能压缩左边导航书每个条目的行高（这个功能上面的脚本没有），但是缺少压缩左边导航树的左边距的功能。<br />　　以下是脚本作者提供的效果图：<br /><center><img src=\"http://666kb.com/i/byaubcaxb14sk95o6.png\" alt=\"不见图、请翻墙\" width=\"75%\" /></center></p>\n<h2>★自己动手美化阅读器</h2>\n<p>　　请注意，本章节是留给那些富有 DIY 精神，并且略懂网页基础知识的网友。假如你对上述这些界面优化脚本都不满意，想自己动手写一个脚本来美化阅读器。那么，本章节对你应该有帮助。<br /> 　　反之，如果你对技术一窍不通，或者怕麻烦、或者没时间，请略过本章节。</p>\n<h3>◇如何美化？</h3>\n<p>　　上述这些脚本对 Google Reader 的界面调整，说白了都是修改CSS（层叠样式表）。在油猴脚本中，可以调用 <b>GM_addStyle</b> 函数，往当前页面加入一个新的样式表。如果你略懂 CSS，搞清楚这些脚本的代码应该对你来说就易如反掌。</p>\n<h3>◇调整正文宽度</h3>\n<p>　　以下代码用于修改正文的显示宽度，让正文的宽度能充满屏幕。</p>\n<p>GM_addStyle(&#8220;.entry .entry-body, .entry .entry-title  max-width:100% !important; &#8220;);</p>\n<p></p>\n<h3>◇压缩搜索条高度</h3>\n<p>　　以下代码调整阅读器搜索条的高度（也就是阅读器上方有：Logo、搜索框、搜索按钮的那一行）。代码中的 40px 和 6px 表示高度（像素为单位），你可以根据自己喜好，微调这2个数字。</p>\n<p>GM_addStyle(&#8220;#top-bar  height:<b>40px</b> !important; &#8220;);<br />GM_addStyle(&#8220;#search  padding:<b>6px</b> 0px !important; &#8220;);</p>\n<p></p>\n<h3>◇压缩工具条高度</h3>\n<p>　　以下代码调整工具条的高度（也就是阅读器上方有：&#8221;订阅&#8221;、&#8221;标为已读&#8221;、&#8221;供稿设置&#8221;等按钮的那一行）。</p>\n<p>GM_addStyle(&#8220;#viewer-header  height:<b>40px</b> !important; &#8220;);<br />GM_addStyle(&#8220;#lhn-add-subscription-section  height:<b>40px</b> !important; &#8220;);<br />GM_addStyle(&#8220;#lhn-add-subscription, #viewer-top-controls-container  margin-top:-15px !important; &#8220;);</p>\n<p></p>\n<h3>◇压缩文章列表的行高</h3>\n<p>　　新版界面的文章列表，行高大得离谱了，必须得调小。如下代码可以搞定。1.2em 表示行高是字体高度的1.2倍。</p>\n<p>GM_addStyle(&#8220;#entries  padding:0px !important; &#8220;);<br />GM_addStyle(&#8220;.collapsed  line-height:<b>1.2em</b> !important; padding:2px 0 !important; &#8220;);<br />GM_addStyle(&#8220;.entry-icons  top:0px !important &#8220;);<br />GM_addStyle(&#8220;.entry-source-title  top:2px !important &#8220;);<br />GM_addStyle(&#8220;.entry-secondary  top:2px !important &#8220;);<br />GM_addStyle(&#8220;.entry-main .entry-original  top:4px !important &#8220;);</p>\n<h3>◇压缩导航树的左边距</h3>\n<p>　　导航树左边留了一大块空白，也不知要作甚？用如下代码压缩掉。</p>\n<p>GM_addStyle(&#8220;.section-minimize  left:0px !important &#8220;);<br />GM_addStyle(&#8220;#overview-selector, #lhn-selectors .selector, .folder .name.name-d-0, #sub-tree-header  padding-left:15px !important; &#8220;);<br />GM_addStyle(&#8220;.folder .folder .folder-toggle  margin-left:12px !important &#8220;);<br />GM_addStyle(&#8220;.folder .sub-icon, .folder .folder>a>.icon  margin-left:27px !important &#8220;);<br />GM_addStyle(&#8220;.folder .folder>ul .icon  margin-left:34px !important &#8220;);<br />GM_addStyle(&#8220;.folder .folder .name-text  max-width:160px; !important &#8220;);<br />GM_addStyle(&#8220;#reading-list-selector .label  display:inline !important &#8220;);</p>\n<p></p>\n<h3>◇压缩导航树不同部分之间的间隙</h3>\n<p>　　导航树由4部分组成（分别是：&#8221;主页&#8221;、&#8221;所有条目&#8221;、&#8221;探索&#8221;、&#8221;订阅&#8221;）。这4块之间的间隙太大，用如下代码压缩。</p>\n<p>GM_addStyle(&#8220;.selectors-footer  margin-bottom:0px !important; padding-bottom:0px !important; &#8220;);<br />GM_addStyle(&#8220;.lhn-section-footer  margin-bottom:0px !important; padding-bottom:0px !important; &#8220;);</p>\n<p></p>\n<h3>◇隐藏导航树的某些部分</h3>\n<p>　　导航树的这4部分，通常是&#8221;订阅&#8221;用得最多。其它3部分如果用得少，嫌它们太占空间，可以用如下代码隐掉。</p>\n<p>// 隐藏“主页”<br />GM_addStyle(&#8220;#overview-selector  display:none !important; &#8220;);<br />// 隐藏“所有条目”<br />GM_addStyle(&#8220;#lhn-selectors  display:none !important; &#8220;);<br />// 隐藏“探索”<br />GM_addStyle(&#8220;#lhn-recommendations  display:none !important; &#8220;);</p>\n<p></p>\n<h3>◇调整导航树的宽度</h3>\n<p>　　由于不同人的偏好及屏幕尺寸各有差异。因此，很多刁钻滴用户（比如俺）对导航树占的宽度不满意。你可以用如下代码来调整。代码中的 240px 表示宽度，你可以根据喜好来调整。在这3行代码中，此数值要保持一致。</p>\n<p>GM_addStyle(&#8220;#nav, #nav *  max-width:<b>240px</b> !important; &#8220;);<br />GM_addStyle(&#8220;#nav  width:<b>240px</b> !important; &#8220;);<br />GM_addStyle(&#8220;#chrome  margin-left:<b>240px</b> !important; &#8220;);</p>\n<p></p>\n<h2>★结尾</h2>\n<p>　　今天说了这一大坨，也不知道大伙儿是否有兴趣？如果大伙儿对油猴的兴趣比较大，俺可以找时间再介绍其它一些实用的油猴脚本。</p>\n<div>================================</p>\n<h4>版权声明</h4>\n<p>本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者&#8221;编程随想&#8221;和本文原始地址。</p>\n<h4>学习翻墙</h4>\n<p>发任意邮件到<b>help_gfw@yahoo.com</b>即可自动获取翻墙扫盲教程;别用国内邮箱,易被墙。如有其它问题要联系俺,请写信到<b>program.think@gmail.com</b><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5235590154125226279-709032645234317031?l=program-think.blogspot.com\" alt=\"\" /></div>\n<div>\n<a rel=\"nofollow\" href=\"http://feeds.feedburner.com/~ff/programthink?a=1vfz4iXm5zw:pRp1qnqPc28:yIl2AUoC8zA\"><img src=\"http://feeds.feedburner.com/~ff/programthink?d=yIl2AUoC8zA\" border=\"0\" /></a> <a rel=\"nofollow\" href=\"http://feeds.feedburner.com/~ff/programthink?a=1vfz4iXm5zw:pRp1qnqPc28:qj6IDK7rITs\"><img src=\"http://feeds.feedburner.com/~ff/programthink?d=qj6IDK7rITs\" border=\"0\" /></a> <a rel=\"nofollow\" href=\"http://feeds.feedburner.com/~ff/programthink?a=1vfz4iXm5zw:pRp1qnqPc28:7Q72WNTAKBA\"><img src=\"http://feeds.feedburner.com/~ff/programthink?d=7Q72WNTAKBA\" border=\"0\" /></a> <a rel=\"nofollow\" href=\"http://feeds.feedburner.com/~ff/programthink?a=1vfz4iXm5zw:pRp1qnqPc28:V_sGLiPBpWU\"><img src=\"http://feeds.feedburner.com/~ff/programthink?i=1vfz4iXm5zw:pRp1qnqPc28:V_sGLiPBpWU\" border=\"0\" /></a>\n</div>\n<p><img src=\"http://feeds.feedburner.com/~r/programthink/~4/1vfz4iXm5zw\" height=\"1\" width=\"1\" /></p>\n<p><img src=\"http://blob-s-docs.googlegroups.com/docs/OQAAAHohjgl2Ufln43tgqlvePn9iQf7AFj-yasg7x2PGEbBhhvgxV3DzOTOUV69sqpLvK0ENrz5hXg0X4wzqFZV3rFAA15jOjGMMesMMCgiF_ckQ26ejZhzyBmGv\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":991,"categories":[9203],"tags":[9400,18635]}