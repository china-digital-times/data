{"id":174377,"link":"https://chinadigitaltimes.net/chinese/2011/08/不解决dns污染，还是会被墙/","date":"2011-08-26T14:00:22Z","modified":"2011-09-27T17:14:43Z","title":"不解决DNS污染，还是会被墙","content":"<p>来源：<a href=\"http://www.fradser.info/if-dns-pollution-is-not-resolved-it-also-will-be-gfwed/\">http://www.fradser.info/if-dns-pollution-is-not-resolved-it-also-will-be-gfwed/</a></p>\n<p><span><span></p>\n<p> 这几天一直在纠结、研究各种翻墙的方法，修改hosts上facebook、twitter以及YouTube的方法在一定程度上可以缓解被墙的尴尬。你可以先看看<a href=\"http://www.fradser.info/hosts-automatically-modify-program-was-updated-more-powerful/\">这篇文章</a>了解FGQI Snake制作的自动修改hosts程序，但是这种办法也有它的弊端，在我这几天的使用中极其的不稳定。于是在网络上寻求解决的办法，总结一下，希望大家喜欢。</p>\n<h4> 想翻墙，你得先了解GFW</h4>\n<blockquote>\n<p> <strong>防火长城</strong>（英语：Great Firewall，常用简称：<strong>GFW</strong>或<strong>功夫网</strong>，中文也称<strong>中国国家防火墙</strong>、<strong>长城防火墙</strong>或<strong>万里防火墙</strong>）是对中华人民共和国政府在其管辖互联网内部创建的多套网络审查系统（包括相关行政审查系统）的称呼。</p>\n</blockquote>\n<p> 千万不要小瞧GFW，据说它可能由<strong>数百台曙光4000L服务器</strong>组成，后台强硬，还据说思科公司也有参与。<strong>单台曙光4000L服务器采用7U架构，CPU类型为AMD Opteron，使用644GB EEC DDRII内存，10TB硬盘，最大支持600TB，电源功率为160KW，操作系统为Linux（数据来自网络，不保证正确）。</strong>想想数百台曙光4000L服务器组成的机群是怎样的性能，所以我们这些屁民是永远斗不过“河蟹”的，无论你用那种方法翻墙，相信我GFW总有办法让你回到祖国的怀抱。</p>\n<p> 但是，也不要小看我们的力量。</p>\n<p> 也许，你和我一样有些时候用SSH的方式翻墙，也会被GFW解析到错误的地址，其中就涉及到GFW最主要的技术手段——<strong>域名劫持</strong>：</p>\n<blockquote>\n<h5><span>防火长城对所有经过骨干出口路由的在UDP的53端口上的域名查询进行IDS入侵检测，一经发现与黑名单关键词相匹配的域名查询请求，防火长城会马上伪装成目标域名的解析服务器给查询者返回虚假结果。由于通常的域名查询没有任何认证机制，而且域名查询通常基于的UDP协议是无连接不可靠的协议，查询者只能接受最先到达的格式正确结果，并丢弃之后的结果。而用户直接查询境外域名查询服务器（比如 Google Public DNS ）又可能会被防火长城污染，从而在没有任何防范机制的情况下仍然不能获得目标网站正确的IP地址。</span></h5>\n<h5><span>从2002年左右开始，中国大陆的网络安全单位开始采用域名劫持（域名污染）技术，使用思科（Cisco）提供的路由器IDS监测系统来进行域名劫持，防止了一般民众访问被过滤的网站，2002年Google被封锁期间其域名就被劫持到百度，而中国部分ISP也会通过此技术插入广告。对于含有多个IP地址或经常变更IP地址逃避封锁的域名，防火长城通常会使用此方法进行封锁，具体方法是当用户向境内DNS服务器提交域名请求时，DNS服务器返回虚假（或不解析）的IP地址。</span></h5>\n<h5><span>全球一共有13组根域名服务器（Root Server），先前中国大陆有F、I这2个根域DNS镜像[9]，但现在均已因为多次DNS污染外国网络，威胁互联网安全和自由而被断开与国际互联网的连接。</span></h5>\n</blockquote>\n<p> <strong><a href=\"http://zh.wikipedia.org/wiki/GFW\">点击跳转</a>（需翻墙）到Wikipedia，看看GFW是怎样的无所不用其极 。</strong></p>\n<h4> DNS劫持很容易解决</h4>\n<p> 对于DNS劫持，你只需要手动设置DNS到国外的地址就行了，但是即使你这样做也很有可能上不了你想看的东西。最主要的原因要涉及到DNS污染的问题。</p>\n<h4> 以下是关于DNS污染的简单实验：</h4>\n<p> DNS污染在我的理解里就是当你输入某个网站地址的时候，你需要经过DNS服务器解析才能的得到正确的网站IP，从而链接到你想链接的网站（不知道正确不？）。GFW就在最关键的一步做了手脚，这王八总是给你错误的IP地址，而且还是随机的。所以即使你使用的国外的DNS从而解决了DNS劫持的问题，还是看不了你想看的东西。<a href=\"http://www.fradser.info/wp-content/uploads/2011/08/dns1.jpg\"><img alt=\"\" height=\"434\" src=\"http://www.fradser.info/wp-content/uploads/2011/08/dns1.jpg\" title=\"dns1\" width=\"669\" /></a></p>\n<p> 使用 8.8.8.8 的 Google Public DNS服务器（国外），但是这个DNS已经完完全全被GFW推倒了，解析<a href=\"http://twitter.com\">twitter.com</a>的时候返回的IP地址是带有神一样的随机性。</p>\n<p> <a href=\"http://www.fradser.info/wp-content/uploads/2011/08/dns2.jpg\"><img alt=\"\" height=\"434\" src=\"http://www.fradser.info/wp-content/uploads/2011/08/dns2.jpg\" title=\"dns2\" width=\"669\" /></a><strong></strong></p>\n<p> 经过在本机使用DNS代理，虽说显示的是 127.0.0.1 的本地端，但是我设置的还是 8.8.8.8，这次总是解析到正确的IP地址，也就是已经初步解决了DNS污染的问题。</p>\n<p> <strong>通过修改hosts</strong>，<strong>也可以解决DNS污染的问题</strong>，但是不够稳定，尤为重要的是被墙的网站千万，不全面。所以我还是喜欢通过SSH的方式，也可以播放YouTube的视频。<strong>从我这里修改hosts的效果来看，GFW貌似已经可以越过hosts达到DNS污染的效果，表现在即使修改为正确的hosts，还有可能被墙。</strong>不解……</p>\n<h3> <span>怎样解决DNS污染</span></h3>\n<p> 我使用的是PyDNSProxy，通过DNS本地代理解决DNS污染，从而让GFW不能危害我上网的自由。</p>\n<blockquote>\n<p> 用Python写的一个小程序，用了个非常简单的方法来忽略GFW的DNS缓存污染（暂不公布方法）。使用方法如下：</p>\n<h2> 使用方法</h2>\n<h3> Windows</h3>\n<p> 1. 下载<a href=\"http://pydnsproxy.googlecode.com/files/DNSProxy-0.0.4-win32.exe\" rel=\"nofollow\">pydnsproxy</a>，安装在你喜欢的位置。（注：Windows Vista/7 的用户请使用管理员模式安装）</p>\n<p> 2. 将宽带连接（或者其他你喜爱的名字的连接）的dns服务器设置为127.0.0.1</p>\n<p> 3. Enjoy it!</p>\n<h4> 备注</h4>\n<p> 1. 本软件默认使用OpenDNS的DNS服务器，如果你喜爱其他的<strong>境外DNS服务器</strong>，请修改主目录下的dnsserver.conf文件。（不知道的话请用Google搜索，注意别设成境内的了，不然就又回到祖国妈妈的怀抱了）</p>\n<p> 2. 修改dnsserver.conf后，请在控制面板->管理工具->服务中重启DNSProxy服务。</p>\n<p> 3. exe只是简单的7zip打包，如杀毒软件报告病毒应属误报。提供两个在线扫描结果：<a href=\"http://www.virustotal.com/zh-cn/analisis/1d6f6bd409fbe2f044787961c7a4015e289f22d4122c3a2bb77e9241f224bdd7-1261121253\" rel=\"nofollow\">VirusTotal</a>、<a href=\"http://www.virscan.org/report/89d842cdfb9e0983837e51c1b0cf4a68.html\" rel=\"nofollow\">VirScan</a>。</p>\n<h3> Linux、Mac</h3>\n<p> 目前没有针对Linux和Mac的包，但可以到<a href=\"http://pydnsproxy.googlecode.com/svn/trunk/\" rel=\"nofollow\">SVN</a>里把py的源码checkout下来，除需要手动设置外，使用方法类似于Windows。</p>\n<h2> 说明</h2>\n<p> 什么是DNS缓存污染？参见维基百科的<a href=\"http://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8B%99%E5%99%A8%E7%B7%A9%E5%AD%98%E6%B1%A1%E6%9F%93\" rel=\"nofollow\">这篇条目</a>。</p>\n<p> DNSProxy只提供绕过DNS缓存污染的功能，而不能为你解决连接被重置的问题，更不能为你提供代理服务器翻墙。其他业务，请查询<a href=\"http://code.google.com/p/gappproxy/\" rel=\"nofollow\">GAppProxy</a>。</p>\n<p> 既然不能翻墙，为什么开发这个工具？要知道能解决DNS缓存污染也能对付掉一部分GFW的封锁。比如说你可以使用IPv6，如果能解决掉DNS缓存污染，那么GFW在IPv6唯一的封锁手段（现今）也失效了。</p>\n<p> 转自：<a href=\"http://code.google.com/p/pydnsproxy/\">pydnsproxy-DNS本地代理 官方主页</a>（貌似又需要翻墙）</p>\n<p> 附：<a href=\"http://zh.wikipedia.org/wiki/PyDNSProxy\">PyDNSProxy的</a><a href=\"http://zh.wikipedia.org/wiki/PyDNSProxy\">Wikipedia</a></p>\n</blockquote>\n<h3> 至于至于使用SSH翻墙，You can Google~</h3>\n<h3> 如果你有什么问题，回复此文章，我会尽力帮助。</h3>\n<p></span></span></p>\n<h4>—————————————————————————————————————————</h4>\n<h4>需要翻墙利器? 请<a href=\"http://www.chinagfw.org/2011/04/wuala_18.html?utm_source=feedburner&#038;utm_medium=feed&#038;utm_campaign=Feed%3A+chinagfwblog+%28GFW+Blog%EF%BC%88%E5%8A%9F%E5%A4%AB%E7%BD%91%E4%B8%8E%E7%BF%BB%E5%A2%99%EF%BC%89%29\">安装Wuala</a>，查找和添加gfwblog为好友，就可高速下载翻墙软件，或访问<a href=\"http://tinyurl.com/gfwblog\"><b>http://tinyurl.com/gfwblog</b></a>直接下载。</p>\n<p>推特用户请点击<a href=\"http://qinzhigang.in/login.php\">这里</a>免翻墙上推特</h4>\n<p>请点击<a href=\"https://sesawe.net/-Tools-zh-.html\">这里</a>下载翻墙软件 </p>\n<p>更多翻墙方法请发电邮(最好用Gmail)到：<a href=\"mailto:fanqiang70ma@gmail.com\">fanqiang70ma@gmail.com</a>  </p>\n<p>请阅读和关注<a href=\"https://www.google.com/profiles/112915952962578336480\">中国数字时代</a>、<small>翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙） <br /> </small></p>\n<p>请使用<a href=\"https://www.google.com/reader/view/\">Google Reader</a><a href=\"https://www.google.com/reader/view/feed/http://chinadigitaltimes.net/chinese/feed\">订阅中国数字时代中文版</a>（<a href=\"http://chinadigitaltimes.net/chinese/feed\">http://chinadigitaltimes.net/chinese/feed</a>），阅读最有价值的中文信息；以及<a href=\"https://www.google.com/reader/view/feed/http://feeds2.feedburner.com/chinagfwblog\">GFW BLOG（功夫网与翻墙）</a><a href=\"http://feeds2.feedburner.com/chinagfwblog\">http://feeds2.feedburner.com/chinagfwblog</a>，获取最新翻墙工具和翻墙技巧信息。</p>\n<p> </p>\n<div>推特用户请点击<a href=\"http://edu20.in/login.php\">这里</a>免翻墙上推特<br />\n点击<a href=\"http://fanqiangsesawe.info\">这里</a>下载翻墙软件<br />\n更多翻墙方法请发电邮(最好用Gmail)到:gongminshehui1@gmail.com<br />\n翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）<br />\n阅读<a href=\"http://www.google.com/profiles/112915952962578336480\">中国数字时代</a>（免翻墙）<img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-3409148606256214618?l=www.chinagfw.org\" width=\"1\" /></div>\n<div>\n<a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:yIl2AUoC8zA\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=yIl2AUoC8zA\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:-BTjWOF_DHI\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=D4v1cVdOa-0:ucEizEHAGP8:-BTjWOF_DHI\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:F7zBnMyn0Lo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=D4v1cVdOa-0:ucEizEHAGP8:F7zBnMyn0Lo\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:V_sGLiPBpWU\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=D4v1cVdOa-0:ucEizEHAGP8:V_sGLiPBpWU\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:qj6IDK7rITs\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=qj6IDK7rITs\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:l6gmwiTKsz0\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=l6gmwiTKsz0\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:gIN9vFwOqvQ\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=D4v1cVdOa-0:ucEizEHAGP8:gIN9vFwOqvQ\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=D4v1cVdOa-0:ucEizEHAGP8:TzevzKxY174\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=TzevzKxY174\" /></a>\n</div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/D4v1cVdOa-0\" width=\"1\" /></p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2011/08/f6545c4bdns1.jpg-150x150.jpg\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=750556\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"750556\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":399,"categories":[15300],"tags":[3764,8819,9683,8616,8795]}